<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#000000">
    <title>Speedball 3D</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="assets/images/icon.png">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app">
        <!-- Loading Screen -->
        <div id="loading-screen" class="screen active">
            <div class="loader">
                <div class="spinner"></div>
                <p>ุฌุงุฑู ุงูุชุญููู...</p>
            </div>
        </div>

        <!-- Menu Screen -->
        <div id="menu-screen" class="screen">
            <div class="menu-header">
                <h1 class="game-title">SPEEDBALL 3D</h1>
                <div class="user-info" id="user-info"></div>
            </div>
            <div class="menu-buttons">
                <button class="menu-btn play-btn" id="btn-play">โถ๏ธ ุงุจุฏุฃ ุงููุนุจ</button>
                <button class="menu-btn" id="btn-profile">๐ค ุงูููู ุงูุดุฎุตู</button>
                <button class="menu-btn" id="btn-leaderboard">๐ ุงููุชุตุฏุฑูู</button>
                <button class="menu-btn" id="btn-settings">โ๏ธ ุงูุฅุนุฏุงุฏุงุช</button>
            </div>
            <div class="stats-preview">
                <div class="stat-item">
                    <span class="stat-label">ุฃูุถู ูุชูุฌุฉ</span>
                    <span class="stat-value" id="best-score">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">ุงูุนููุงุช</span>
                    <span class="stat-value" id="coins">0</span>
                </div>
            </div>
        </div>

        <!-- Auth Screen -->
        <div id="auth-screen" class="screen">
            <div class="auth-container">
                <button class="back-btn" id="auth-back">โ ุฑุฌูุน</button>
                <h2 id="auth-title">ุชุณุฌูู ุงูุฏุฎูู</h2>
                <form id="auth-form">
                    <div class="input-group">
                        <label>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (Gmail)</label>
                        <input type="email" id="auth-email" placeholder="example@gmail.com" required>
                        <span class="input-hint" id="email-hint"></span>
                    </div>
                    <div class="input-group">
                        <label>ูููุฉ ุงูุณุฑ</label>
                        <input type="password" id="auth-password" placeholder="โขโขโขโขโขโขโขโข" required>
                        <div class="password-strength"><div class="password-strength-bar" id="password-strength"></div></div>
                        <span class="input-hint" id="password-hint"></span>
                    </div>
                    <button type="submit" class="submit-btn"><span id="auth-submit-text">ุฏุฎูู</span></button>
                </form>
                <p class="auth-toggle">
                    <span id="auth-toggle-text">ููุณ ูุฏูู ุญุณุงุจุ</span>
                    <a href="#" id="auth-toggle-link">ุณุฌู ุงูุขู</a>
                </p>
                <div class="auth-message" id="auth-message"></div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="screen">
            <div class="game-ui">
                <div class="game-header">
                    <div class="score-display">
                        <span class="label">ุงูููุงุท</span>
                        <span class="value" id="game-score">0</span>
                    </div>
                    <div class="time-display">
                        <span class="label">โฑ๏ธ</span>
                        <span class="value" id="game-time">0</span>
                    </div>
                    <button class="pause-btn" id="btn-pause">โธ๏ธ</button>
                </div>
                <canvas id="game-canvas"></canvas>
                <div class="game-controls">
                    <button class="control-btn" id="btn-left">โ๏ธ</button>
                    <button class="control-btn" id="btn-jump">โฌ๏ธ</button>
                    <button class="control-btn" id="btn-right">โถ๏ธ</button>
                </div>
            </div>
        </div>

        <!-- Profile Screen -->
        <div id="profile-screen" class="screen">
            <button class="back-btn" id="profile-back">โ ุฑุฌูุน</button>
            <div class="profile-container"></div>
        </div>

        <!-- Leaderboard Screen -->
        <div id="leaderboard-screen" class="screen">
            <button class="back-btn" id="leaderboard-back">โ ุฑุฌูุน</button>
            <div class="leaderboard-container">
                <h2>๐ ุงููุชุตุฏุฑูู</h2>
                <div class="leaderboard-list" id="leaderboard-list"></div>
            </div>
        </div>

        <!-- Settings Screen -->
        <div id="settings-screen" class="screen">
            <button class="back-btn" id="settings-back">โ ุฑุฌูุน</button>
            <div class="settings-container"></div>
        </div>
    </div>

    <!-- โก Supabase CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- ๐ฆ Main App (ูุจุงุดุฑ ุจุฏูู modules) -->
    <script>
        console.log('๐ฎ Starting Speedball 3D...');
        
        // ุงูุชุญูู ูู ุชุญููู Supabase
        if (typeof supabase === 'undefined') {
            console.error('โ Supabase not loaded!');
            document.querySelector('#loading-screen p').textContent = 'ุฎุทุฃ: ูุดู ุชุญููู ุงูููุชุจุงุช ุงูุฃุณุงุณูุฉ';
        } else {
            console.log('โ Supabase loaded successfully');
        }
        
        // ุฅุฎูุงุก ุดุงุดุฉ ุงูุชุญููู ุจุนุฏ 2 ุซุงููุฉ
        setTimeout(() => {
            const loadingScreen = document.getElementById('loading-screen');
            const menuScreen = document.getElementById('menu-screen');
            const authScreen = document.getElementById('auth-screen');
            
            if (loadingScreen) loadingScreen.classList.remove('active');
            
            // ุนุฑุถ ุดุงุดุฉ ุงูุชุณุฌูู ูุจุงุดุฑุฉ
            if (authScreen) authScreen.classList.add('active');
            
            console.log('โ App loaded');
        }, 2000);
        
        // ุฅุนุฏุงุฏ ุงูุฃุฒุฑุงุฑ ุงูุฃุณุงุณูุฉ
        document.addEventListener('DOMContentLoaded', () => {
            // ุฒุฑ ุงูุฑุฌูุน ูู ุงูุชุณุฌูู
            const authBack = document.getElementById('auth-back');
            if (authBack) {
                authBack.addEventListener('click', () => {
                    document.getElementById('auth-screen').classList.remove('active');
                    document.getElementById('menu-screen').classList.add('active');
                });
            }
            
            // ุชุจุฏูู ุจูู ุชุณุฌูู ูุฏุฎูู
            const toggleLink = document.getElementById('auth-toggle-link');
            if (toggleLink) {
                toggleLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    const title = document.getElementById('auth-title');
                    const submitText = document.getElementById('auth-submit-text');
                    const toggleText = document.getElementById('auth-toggle-text');
                    
                    if (title.textContent === 'ุชุณุฌูู ุงูุฏุฎูู') {
                        title.textContent = 'ุฅูุดุงุก ุญุณุงุจ';
                        submitText.textContent = 'ุชุณุฌูู';
                        toggleText.textContent = 'ูุฏูู ุญุณุงุจุ';
                        toggleLink.textContent = 'ุณุฌู ุฏุฎูู';
                    } else {
                        title.textContent = 'ุชุณุฌูู ุงูุฏุฎูู';
                        submitText.textContent = 'ุฏุฎูู';
                        toggleText.textContent = 'ููุณ ูุฏูู ุญุณุงุจุ';
                        toggleLink.textContent = 'ุณุฌู ุงูุขู';
                    }
                });
            }
            
            console.log('โ Basic UI initialized');
        });
    </script>
</body>
</html>
