<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#000000">
    <meta name="description" content="Speedball 3D - ูุนุจุฉ ูุฑุฉ ุณุฑูุนุฉ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ ูุน ููุญุฉ ูุชุตุฏุฑูู ุนุงูููุฉ">
    
    <title>Speedball 3D - ูุนุจุฉ ุงููุฑุฉ ุงูุณุฑูุนุฉ</title>
    
    <!-- ๐ฑ PWA Support -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="assets/images/icon.png">
    <link rel="apple-touch-icon" href="assets/images/icon.png">
    
    <!-- ๐จ Styles -->
    <link rel="stylesheet" href="style.css">
    
    <!-- โก Supabase CDN - IMPORTANT -->
    <script src="https://unpkg.com/@supabase/supabase-js@2.38.4/dist/umd/supabase.js"></script>
</head>
<body>
    <!-- ๐ฎ Game Container -->
    <div id="app">
        <!-- Loading Screen -->
        <div id="loading-screen" class="screen active">
            <div class="loader">
                <div class="spinner"></div>
                <p>ุฌุงุฑู ุงูุชุญููู...</p>
            </div>
        </div>

        <!-- Main Menu -->
        <div id="menu-screen" class="screen">
            <div class="menu-header">
                <h1 class="game-title">
                    <span class="title-icon">โฝ</span>
                    SPEEDBALL 3D
                </h1>
                <div class="user-info" id="user-info">
                    <!-- ุณูุชู ููุคูุง ุจุงูู JS -->
                </div>
            </div>

            <div class="menu-buttons">
                <button class="menu-btn play-btn" id="btn-play">
                    <span class="icon">โถ๏ธ</span>
                    ุงุจุฏุฃ ุงููุนุจ
                </button>
                <button class="menu-btn" id="btn-profile">
                    <span class="icon">๐ค</span>
                    ุงูููู ุงูุดุฎุตู
                </button>
                <button class="menu-btn" id="btn-leaderboard">
                    <span class="icon">๐</span>
                    ุงููุชุตุฏุฑูู
                </button>
                <button class="menu-btn" id="btn-balls">
                    <span class="icon">โฝ</span>
                    ุงููุฑุงุช
                </button>
                <button class="menu-btn" id="btn-roads">
                    <span class="icon">๐ฃ๏ธ</span>
                    ุงูุทุฑู
                </button>
                <button class="menu-btn" id="btn-settings">
                    <span class="icon">โ๏ธ</span>
                    ุงูุฅุนุฏุงุฏุงุช
                </button>
            </div>

            <div class="stats-preview">
                <div class="stat-item">
                    <span class="stat-label">ุฃูุถู ูุชูุฌุฉ</span>
                    <span class="stat-value" id="best-score">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">ุงูุนููุงุช</span>
                    <span class="stat-value" id="coins">0</span>
                </div>
            </div>
        </div>

        <!-- Auth Screen -->
        <div id="auth-screen" class="screen">
            <div class="auth-container">
                <button class="back-btn" id="auth-back">โ ุฑุฌูุน</button>
                
                <h2 id="auth-title">ุชุณุฌูู ุงูุฏุฎูู</h2>
                
                <form id="auth-form">
                    <div class="input-group">
                        <label>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (Gmail ููุท)</label>
                        <input type="email" id="auth-email" placeholder="example@gmail.com" required>
                        <span class="input-hint" id="email-hint"></span>
                    </div>
                    
                    <div class="input-group">
                        <label>ูููุฉ ุงูุณุฑ</label>
                        <input type="password" id="auth-password" placeholder="โขโขโขโขโขโขโขโข" required>
                        <div class="password-strength" id="password-strength"></div>
                        <span class="input-hint" id="password-hint"></span>
                    </div>
                    
                    <button type="submit" class="submit-btn" id="auth-submit">
                        <span id="auth-submit-text">ุฏุฎูู</span>
                    </button>
                </form>
                
                <p class="auth-toggle">
                    <span id="auth-toggle-text">ููุณ ูุฏูู ุญุณุงุจุ</span>
                    <a href="#" id="auth-toggle-link">ุณุฌู ุงูุขู</a>
                </p>
                
                <div class="auth-message" id="auth-message"></div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="screen">
            <div class="game-ui">
                <div class="game-header">
                    <div class="score-display">
                        <span class="label">ุงูููุงุท</span>
                        <span class="value" id="game-score">0</span>
                    </div>
                    <div class="time-display">
                        <span class="label">โฑ๏ธ</span>
                        <span class="value" id="game-time">0</span>
                    </div>
                    <button class="pause-btn" id="btn-pause">โธ๏ธ</button>
                </div>
                
                <canvas id="game-canvas"></canvas>
                
                <div class="game-controls">
                    <button class="control-btn" id="btn-left">โ๏ธ</button>
                    <button class="control-btn" id="btn-jump">โฌ๏ธ</button>
                    <button class="control-btn" id="btn-right">โถ๏ธ</button>
                </div>
            </div>
            
            <!-- Pause Menu -->
            <div id="pause-menu" class="overlay-menu">
                <div class="menu-content">
                    <h3>ูุชููู ูุคูุชุงู</h3>
                    <button class="menu-option-btn" id="btn-resume">ุงุณุชุฆูุงู</button>
                    <button class="menu-option-btn" id="btn-restart">ุฅุนุงุฏุฉ</button>
                    <button class="menu-option-btn" id="btn-quit">ุฎุฑูุฌ</button>
                </div>
            </div>
            
            <!-- Game Over -->
            <div id="gameover-menu" class="overlay-menu">
                <div class="menu-content">
                    <h3>ุงูุชูุช ุงููุนุจุฉ!</h3>
                    <div class="final-score">
                        <p>ุงูููุงุท ุงูููุงุฆูุฉ</p>
                        <h2 id="final-score">0</h2>
                    </div>
                    <div class="game-stats">
                        <div class="stat">
                            <span>ุงูููุช</span>
                            <span id="final-time">0s</span>
                        </div>
                        <div class="stat">
                            <span>ุนููุงุช ุฌุฏูุฏุฉ</span>
                            <span id="coins-earned">+0</span>
                        </div>
                    </div>
                    <div id="new-record" class="new-record hidden">
                        ๐ ุฑูู ููุงุณู ุฌุฏูุฏ!
                    </div>
                    <button class="menu-option-btn" id="btn-play-again">ุงูุนุจ ูุฌุฏุฏุงู</button>
                    <button class="menu-option-btn" id="btn-menu">ุงููุงุฆูุฉ</button>
                </div>
            </div>
        </div>

        <!-- Profile Screen -->
        <div id="profile-screen" class="screen">
            <button class="back-btn" id="profile-back">โ ุฑุฌูุน</button>
            <div class="profile-container">
                <!-- ุณูุชู ููุคูุง ุฏููุงููููุงู -->
            </div>
        </div>

        <!-- Leaderboard Screen -->
        <div id="leaderboard-screen" class="screen">
            <button class="back-btn" id="leaderboard-back">โ ุฑุฌูุน</button>
            <div class="leaderboard-container">
                <h2>๐ ุงููุชุตุฏุฑูู ุงูุนุงููููู</h2>
                <div class="leaderboard-filters">
                    <button class="filter-btn active" data-filter="global">ุนุงููู</button>
                    <button class="filter-btn" data-filter="country">ุฏููุชู</button>
                    <button class="filter-btn" data-filter="today">ุงูููู</button>
                </div>
                <div class="leaderboard-list" id="leaderboard-list">
                    <!-- ุณูุชู ููุคูุง ุฏููุงููููุงู -->
                </div>
            </div>
        </div>

        <!-- Settings Screen -->
        <div id="settings-screen" class="screen">
            <button class="back-btn" id="settings-back">โ ุฑุฌูุน</button>
            <div class="settings-container">
                <!-- ุณูุชู ููุคูุง ุฏููุงููููุงู -->
            </div>
        </div>
    </div>

    <!-- ๐ Audio (hidden) -->
    <audio id="audio-bg" loop></audio>
    <audio id="audio-click"></audio>
    <audio id="audio-bounce"></audio>
    <audio id="audio-gameover"></audio>

    <!-- ๐ฆ Scripts - ES6 Modules -->
    <script type="module" src="js/online/supabase-config.js"></script>
    <script type="module" src="js/online/auth-manager.js"></script>
    <script type="module" src="js/online/online-leaderboard.js"></script>
    <script type="module" src="js/online/online-save.js"></script>
    <script type="module" src="js/online/user-profiles.js"></script>
    <script type="module" src="js/online/realtime.js"></script>
    <script type="module" src="js/online/avatar-manager.js"></script>
    <script type="module" src="js/online/country-selector.js"></script>
    <script type="module" src="js/online/profile-editor.js"></script>
    
    <script type="module" src="js/core/game.js"></script>
    <script type="module" src="js/core/balls.js"></script>
    <script type="module" src="js/core/roads.js"></script>
    <script type="module" src="js/core/coins.js"></script>
    <script type="module" src="js/core/game-data-online.js"></script>
    
    <script type="module" src="js/systems/audio-manager.js"></script>
    <script type="module" src="js/systems/sound-effects.js"></script>
    <script type="module" src="js/systems/particles.js"></script>
    <script type="module" src="js/systems/animations.js"></script>
    <script type="module" src="js/systems/achievements-online.js"></script>
    <script type="module" src="js/systems/challenges-online.js"></script>
    <script type="module" src="js/systems/stats-online.js"></script>
    <script type="module" src="js/systems/settings-online.js"></script>
    
    <script type="module" src="js/ui/ui-main.js"></script>
    <script type="module" src="js/ui/auth-ui.js"></script>
    <script type="module" src="js/ui/profile-ui.js"></script>
    <script type="module" src="js/ui/ui-effects.js"></script>
    <script type="module" src="js/ui/themes-online.js"></script>
    <script type="module" src="js/ui/notifications.js"></script>
    <script type="module" src="js/ui/tutorial.js"></script>
    
    <!-- Main App -->
    <script type="module" src="js/app.js"></script>
</body>
</html>
