<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#000000">
    <title>Speedball 3D</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="assets/images/icon.png">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app">
        <!-- Loading Screen -->
        <div id="loading-screen" class="screen active">
            <div class="loader">
                <div class="spinner"></div>
                <p>ุฌุงุฑู ุงูุชุญููู...</p>
            </div>
        </div>

        <!-- Menu Screen -->
        <div id="menu-screen" class="screen">
            <div class="menu-header">
                <h1 class="game-title">SPEEDBALL 3D</h1>
                <div class="user-info" id="user-info"></div>
            </div>
            <div class="menu-buttons">
                <button class="menu-btn play-btn" id="btn-play">โถ๏ธ ุงุจุฏุฃ ุงููุนุจ</button>
                <button class="menu-btn" id="btn-profile">๐ค ุงูููู ุงูุดุฎุตู</button>
                <button class="menu-btn" id="btn-leaderboard">๐ ุงููุชุตุฏุฑูู</button>
                <button class="menu-btn" id="btn-settings">โ๏ธ ุงูุฅุนุฏุงุฏุงุช</button>
            </div>
            <div class="stats-preview">
                <div class="stat-item">
                    <span class="stat-label">ุฃูุถู ูุชูุฌุฉ</span>
                    <span class="stat-value" id="best-score">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">ุงูุนููุงุช</span>
                    <span class="stat-value" id="coins">0</span>
                </div>
            </div>
        </div>

        <!-- Auth Screen -->
        <div id="auth-screen" class="screen">
            <div class="auth-container">
                <button class="back-btn" id="auth-back">โ ุฑุฌูุน</button>
                <h2 id="auth-title">ุชุณุฌูู ุงูุฏุฎูู</h2>
                <!-- OAuth Buttons -->
                <div class="oauth-buttons">
                    <button type="button" class="oauth-btn google-btn" id="btn-google">
                        <svg width="18" height="18" viewBox="0 0 18 18"><path fill="#4285F4" d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z"/><path fill="#34A853" d="M9 18c2.43 0 4.467-.806 5.956-2.184l-2.908-2.258c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9 18z"/><path fill="#FBBC05" d="M3.964 10.707c-.18-.54-.282-1.117-.282-1.707s.102-1.167.282-1.707V4.961H.957C.347 6.175 0 7.55 0 9s.348 2.825.957 4.039l3.007-2.332z"/><path fill="#EA4335" d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0 5.482 0 2.438 2.017.957 4.961L3.964 7.293C4.672 5.163 6.656 3.58 9 3.58z"/></svg>
                        ุชุณุฌูู ุนุจุฑ Google
                    </button>
                    <button type="button" class="oauth-btn github-btn" id="btn-github">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/></svg>
                        ุชุณุฌูู ุนุจุฑ GitHub
                    </button>
                    <button type="button" class="oauth-btn discord-btn" id="btn-discord">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M20.317 4.37a19.791 19.791 0 00-4.885-1.515.074.074 0 00-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 00-5.487 0 12.64 12.64 0 00-.617-1.25.077.077 0 00-.079-.037A19.736 19.736 0 003.677 4.37a.07.07 0 00-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 00.031.057 19.9 19.9 0 005.993 3.03.078.078 0 00.084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 00-.041-.106 13.107 13.107 0 01-1.872-.892.077.077 0 01-.008-.128 10.2 10.2 0 00.372-.292.074.074 0 01.077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 01.078.01c.12.098.246.198.373.292a.077.077 0 01-.006.127 12.299 12.299 0 01-1.873.892.077.077 0 00-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 00.084.028 19.839 19.839 0 006.002-3.03.077.077 0 00.032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 00-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/></svg>
                        ุชุณุฌูู ุนุจุฑ Discord
                    </button>
                </div>
                
                <div class="divider">
                    <span>ุฃู</span>
                </div>

                <form id="auth-form">
                    <div class="input-group">
                        <label>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (Gmail)</label>
                        <input type="email" id="auth-email" placeholder="example@gmail.com" required>
                        <span class="input-hint" id="email-hint"></span>
                    </div>
                    <div class="input-group">
                        <label>ูููุฉ ุงูุณุฑ</label>
                        <input type="password" id="auth-password" placeholder="โขโขโขโขโขโขโขโข" required>
                        <div class="password-strength"><div class="password-strength-bar" id="password-strength"></div></div>
                        <span class="input-hint" id="password-hint"></span>
                    </div>
                    <button type="submit" class="submit-btn"><span id="auth-submit-text">ุฏุฎูู</span></button>
                </form>
                <p class="auth-toggle">
                    <span id="auth-toggle-text">ููุณ ูุฏูู ุญุณุงุจุ</span>
                    <a href="#" id="auth-toggle-link">ุณุฌู ุงูุขู</a>
                </p>
                <div class="auth-message" id="auth-message"></div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="screen">
            <div class="game-ui">
                <div class="game-header">
                    <div class="score-display">
                        <span class="label">ุงูููุงุท</span>
                        <span class="value" id="game-score">0</span>
                    </div>
                    <div class="time-display">
                        <span class="label">โฑ๏ธ</span>
                        <span class="value" id="game-time">0</span>
                    </div>
                    <button class="pause-btn" id="btn-pause">โธ๏ธ</button>
                </div>
                <canvas id="game-canvas"></canvas>
                <div class="game-controls">
                    <button class="control-btn" id="btn-left">โ๏ธ</button>
                    <button class="control-btn" id="btn-jump">โฌ๏ธ</button>
                    <button class="control-btn" id="btn-right">โถ๏ธ</button>
                </div>
            </div>
        </div>

        <!-- Profile Screen -->
        <div id="profile-screen" class="screen">
            <button class="back-btn" id="profile-back">โ ุฑุฌูุน</button>
            <div class="profile-container"></div>
        </div>

        <!-- Leaderboard Screen -->
        <div id="leaderboard-screen" class="screen">
            <button class="back-btn" id="leaderboard-back">โ ุฑุฌูุน</button>
            <div class="leaderboard-container">
                <h2>๐ ุงููุชุตุฏุฑูู</h2>
                <div class="leaderboard-list" id="leaderboard-list"></div>
            </div>
        </div>

        <!-- Settings Screen -->
        <div id="settings-screen" class="screen">
            <button class="back-btn" id="settings-back">โ ุฑุฌูุน</button>
            <div class="settings-container"></div>
        </div>
    </div>

    <!-- โก Supabase CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- ๐ฆ Main App (ูุจุงุดุฑ ุจุฏูู modules) -->
    <script>
        console.log('๐ฎ Starting Speedball 3D...');
        
        // ุงูุชุญูู ูู ุชุญููู Supabase
        if (typeof supabase === 'undefined') {
            console.error('โ Supabase not loaded!');
            document.querySelector('#loading-screen p').textContent = 'ุฎุทุฃ: ูุดู ุชุญููู ุงูููุชุจุงุช ุงูุฃุณุงุณูุฉ';
        } else {
            console.log('โ Supabase loaded successfully');
        }
        
        // ุฅุฎูุงุก ุดุงุดุฉ ุงูุชุญููู ุจุนุฏ 2 ุซุงููุฉ
        setTimeout(() => {
            const loadingScreen = document.getElementById('loading-screen');
            const menuScreen = document.getElementById('menu-screen');
            const authScreen = document.getElementById('auth-screen');
            
            if (loadingScreen) loadingScreen.classList.remove('active');
            
            // ุนุฑุถ ุดุงุดุฉ ุงูุชุณุฌูู ูุจุงุดุฑุฉ
            if (authScreen) authScreen.classList.add('active');
            
            console.log('โ App loaded');
        }, 2000);
        
        // ุฅุนุฏุงุฏ ุงูุฃุฒุฑุงุฑ ุงูุฃุณุงุณูุฉ
        document.addEventListener('DOMContentLoaded', () => {
            // ุฒุฑ ุงูุฑุฌูุน ูู ุงูุชุณุฌูู
            const authBack = document.getElementById('auth-back');
            if (authBack) {
                authBack.addEventListener('click', () => {
                    document.getElementById('auth-screen').classList.remove('active');
                    document.getElementById('menu-screen').classList.add('active');
                });
            }
            
            // ุชุจุฏูู ุจูู ุชุณุฌูู ูุฏุฎูู
            const toggleLink = document.getElementById('auth-toggle-link');
            if (toggleLink) {
                toggleLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    const title = document.getElementById('auth-title');
                    const submitText = document.getElementById('auth-submit-text');
                    const toggleText = document.getElementById('auth-toggle-text');
                    
                    if (title.textContent === 'ุชุณุฌูู ุงูุฏุฎูู') {
                        title.textContent = 'ุฅูุดุงุก ุญุณุงุจ';
                        submitText.textContent = 'ุชุณุฌูู';
                        toggleText.textContent = 'ูุฏูู ุญุณุงุจุ';
                        toggleLink.textContent = 'ุณุฌู ุฏุฎูู';
                    } else {
                        title.textContent = 'ุชุณุฌูู ุงูุฏุฎูู';
                        submitText.textContent = 'ุฏุฎูู';
                        toggleText.textContent = 'ููุณ ูุฏูู ุญุณุงุจุ';
                        toggleLink.textContent = 'ุณุฌู ุงูุขู';
                    }
                });
            }
            
            console.log('โ Basic UI initialized');
        });
    </script>
</body>
</html>
